
CLEAN_OBJECTS_EXTRA := pcboothd.dsk

DISTCLEAN_OBJECTS_EXTRA := Makefile.in      \
                           configuration.in \
                           configure.ads.in \
                           configure.h.in   \
                           linker.lds       \
                           qemu.cfg

.PHONY : configure-subplatform
configure-subplatform :
	@$(PROCESSCFG) configure.h.in configure.h
	@$(PROCESSCFG) configure.ads.in configure.ads

.PHONY : postbuild-subplatform
postbuild-subplatform :
	$(FILEPAD) $(KERNEL_PARENT_PATH)/$(KERNEL_ROMFILE) 512
ifeq ($(USE_PYTHON),Y)
	$(PYTHON)                                                \
          "$(SWEETADA_PATH)"/$(SHARE_DIRECTORY)/pc-x86-boothd.py \
          $(KERNEL_PARENT_PATH)/$(KERNEL_ROMFILE)                \
          0x4000                                                 \
          +pcboothd.dsk
else
	$(TCLSH)                                                  \
          "$(SWEETADA_PATH)"/$(SHARE_DIRECTORY)/pc-x86-boothd.tcl \
          $(KERNEL_PARENT_PATH)/$(KERNEL_ROMFILE)                 \
          0x4000                                                  \
          +pcboothd.dsk
endif

