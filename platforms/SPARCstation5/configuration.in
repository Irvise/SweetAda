
#
# SPARCstation 5
#
# SPARC V8 BE - Fujitsu MB86904/Sun STP1012 "microSPARC II"
#

CPU := SPARC

GCC_SWITCHES_PLATFORM     += -mflat -mcpu=v8 -m32 -Wa,-Av8
LD_SWITCHES_PLATFORM      +=
OBJDUMP_SWITCHES_PLATFORM +=
POSTBUILD_ROMFILE         := Y
OBJCOPY_SWITCHES_PLATFORM += --output-target=binary --gap-fill=0x00

USE_APPLICATION := test-SPARCstation5

NETWORK_BOOT := N
#NETWORK_BOOT := Y
export NETWORK_BOOT

ifeq ($(NETWORK_BOOT),Y)
LD_SCRIPT := linker.lds-networkboot
RELOCATE_DATA := 0
BOOT_FROM_NETWORK := True
ELFTOAOUT := /usr/local/bin/elftoaout
TFTP_DIRECTORY := /home/tftpboot
TFTP_FILENAME := C0A80202.SUN4M
export ELFTOAOUT TFTP_DIRECTORY TFTP_FILENAME
else
LD_SCRIPT := linker.lds-ROM
RELOCATE_DATA := 1
BOOT_FROM_NETWORK := False
endif
export RELOCATE_DATA BOOT_FROM_NETWORK

MEMSIM2 := $(SWEETADA_PATH)/../hardware/memSIM2/runmemsim2.sh

SESSION_START_COMMAND :=
SESSION_END_COMMAND   :=

RUN_COMMAND   := runsweetada$(EXEEXT) -k "$(SWEETADA_PATH)" -p "$(PLATFORM_DIRECTORY)" -f qemu.cfg
#RUN_COMMAND   := $(MEMSIM2) -m 27020 -r -10 $(SWEETADA_PATH)/$(KERNEL_ROMFILE)
DEBUG_COMMAND := $(RUN_COMMAND) -d DEBUG_QEMU

