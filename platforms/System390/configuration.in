
#
# S/390 (Hercules emulator)
#

CPU       := System390
CPU_MODEL := ESA/390

GCC_SWITCHES_PLATFORM     := -m31
STARTUP_OBJECTS           := startup.S llkernel.S
LD_SWITCHES_PLATFORM      := -m elf_s390
OBJDUMP_SWITCHES_PLATFORM :=
POSTBUILD_ROMFILE         := Y
OBJCOPY_SWITCHES_PLATFORM := -O binary --gap-fill=0x00

USE_APPLICATION := test-System390

KERNEL_IPLFILE := $(KERNEL_BASENAME).ipl
#
# 1) IPL: CARD READER device
#
#IPL_MODE   := CARD_READER
#IPL_DEVNUM := 0100
#IPL_DEVTYP := 3505
#KERNEL_IPL := $(SWEETADA_PATH)/$(PLATFORM_DIRECTORY)/$(KERNEL_IPLFILE)
#
# 2) IPL: DASD device
#
IPL_MODE   := DASD
IPL_DEVNUM := 0100
IPL_DEVTYP := 3330
KERNEL_IPL := $(SWEETADA_PATH)/$(PLATFORM_DIRECTORY)/SYSRES.DSD

export KERNEL_IPLFILE IPL_MODE IPL_DEVNUM IPL_DEVTYP KERNEL_IPL

# Hercules
HERCULES_PREFIX := "/opt/Hercules"
export HERCULES_PREFIX

# allow hercules.rc commands
export HERCULES_RC := $(SWEETADA_PATH)/$(PLATFORM_DIRECTORY)/hercules.rc
# X3270 executable
export X3270 := /opt/x3270/bin/x3270

SESSION_START_COMMAND :=
SESSION_END_COMMAND   :=

RUN_COMMAND   := $(HERCULES_PREFIX)/bin/hercules -f $(SWEETADA_PATH)/$(PLATFORM_DIRECTORY)/s390.cnf
DEBUG_COMMAND :=

